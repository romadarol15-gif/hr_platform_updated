{% extends "base.html" %}
{% block content %}
<div class="container">
<div class="profile-header">
<h2>{% if viewing_own_profile %}–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å{% else %}–ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞{% endif %}</h2>
{% if not viewing_own_profile %}<p class="text-muted">–ü—Ä–æ—Å–º–æ—Ç—Ä: {{ employee.get_full_name }}</p>{% endif %}
</div>
<div class="profile-section">
<div class="profile-avatar-section">
{% if employee.avatar %}
<img src="{{ employee.avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä" class="profile-avatar">
{% else %}
<div class="profile-avatar-placeholder">
<span>{{ employee.first_name.0|default:"?" }}{{ employee.last_name.0|default:"" }}</span>
</div>
{% endif %}
<div class="profile-info-short">
<h3>{{ employee.get_full_name }}</h3>
<p class="position">{{ employee.position }}</p>
<p class="department">{{ employee.department }}</p>
<p class="employee-number">–¢–∞–±–µ–ª—å–Ω—ã–π ‚Ññ: <strong>{{ employee.user.username }}</strong></p>
</div>
</div>
<form method="post" class="profile-form" enctype="multipart/form-data">
{% csrf_token %}
<h3>–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
<div class="form-grid">
<div class="form-group">
{{ form.last_name.label_tag }}
{{ form.last_name }}
</div>
<div class="form-group">
{{ form.first_name.label_tag }}
{{ form.first_name }}
</div>
<div class="form-group">
{{ form.middle_name.label_tag }}
{{ form.middle_name }}
</div>
</div>
<div class="form-grid">
<div class="form-group">
{{ form.phone.label_tag }}
{{ form.phone }}
</div>
<div class="form-group">
{{ form.avatar.label_tag }}
{{ form.avatar }}
{% if employee.avatar %}<p class="form-hint">–¢–µ–∫—É—â–∏–π: <a href="{{ employee.avatar.url }}" target="_blank">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a></p>{% endif %}
</div>
</div>
<h3>–î–æ–ª–∂–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞—Ç—É—Å</h3>
<div class="form-grid">
<div class="form-group">
{{ form.role.label_tag }}
{{ form.role }}
</div>
<div class="form-group">
{{ form.position.label_tag }}
{{ form.position }}
</div>
<div class="form-group">
{{ form.department.label_tag }}
{{ form.department }}
</div>
<div class="form-group">
{{ form.status.label_tag }}
{{ form.status }}
</div>
</div>
<h3>–¶–µ–ª–∏ –∏ –æ–ø—ã—Ç</h3>
<div class="form-group">
{{ form.annual_goal.label_tag }}
{{ form.annual_goal }}
</div>
<div class="form-group">
{{ form.internal_experience.label_tag }}
{{ form.internal_experience }}
</div>
<div class="form-group">
{{ form.external_experience.label_tag }}
{{ form.external_experience }}
</div>
{% if can_edit %}
<button type="submit" class="btn btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
{% endif %}
</form>
</div>
<div class="education-section">
<div class="section-header">
<h3>üéì –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</h3>
{% if viewing_own_profile or can_edit %}
<a href="{% url 'hr:education_add' %}" class="btn btn-primary btn-sm">‚ûï –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</a>
{% endif %}
</div>
{% if educations %}
<div class="education-list">
{% for edu in educations %}
<div class="education-card">
<div class="education-header">
<h4>{{ edu.institution }}</h4>
<span class="badge badge-done">{{ edu.degree }}</span>
</div>
<p><strong>–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å:</strong> {{ edu.field_of_study }}</p>
<p><strong>–ü–µ—Ä–∏–æ–¥:</strong> {{ edu.start_year }} - {% if edu.end_year %}{{ edu.end_year }}{% else %}–Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è{% endif %}</p>
{% if edu.description %}<p>{{ edu.description }}</p>{% endif %}
{% if edu.diploma_file %}
<p class="diploma-file">üìé <a href="{{ edu.diploma_file.url }}" target="_blank">–î–∏–ø–ª–æ–º/–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç</a></p>
{% endif %}
{% if viewing_own_profile or can_edit %}
<div class="education-actions">
<a href="{% url 'hr:education_edit' edu.id %}" class="btn btn-secondary btn-sm">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
<form method="post" action="{% url 'hr:education_delete' edu.id %}" style="display:inline;" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ?');">
{% csrf_token %}
<button type="submit" class="btn btn-danger btn-sm">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
</form>
</div>
{% endif %}
</div>
{% endfor %}
</div>
{% else %}
<p class="text-muted">–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ</p>
{% endif %}
</div>
</div>
{% endblock %}