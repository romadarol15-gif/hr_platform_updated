{% extends "base.html" %}
{% block content %}
<div class="container">
<div class="page-header">
<h2>ğŸ“‹ Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸</h2>
<a href="{% url 'hr:task_create' %}" class="btn btn-primary">â• Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ</a>
</div>
<div class="tasks-list">
{% for task in tasks %}
<div class="task-card">
<div class="task-header">
<h3>{{ task.title }}</h3>
<span class="badge badge-{{ task.status }}">{{ task.get_status_display }}</span>
</div>
<p>{{ task.description|truncatewords:30 }}</p>
<div class="task-meta">
<span>ğŸ‘¤ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ»: {{ task.creator.employee_profile.get_full_name|default:task.creator.username }}</span>
<span>ğŸ‘¨â€ğŸ’¼ Ğ˜ÑĞ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒ: {{ task.assignee.employee_profile.get_full_name|default:task.assignee.username }}</span>
<span>ğŸ“… Ğ”Ğ°Ñ‚Ğ°: {{ task.created_at|date:"d.m.Y H:i" }}</span>
{% if task.due_date %}<span>â° Ğ¡Ñ€Ğ¾Ğº: {{ task.due_date|date:"d.m.Y" }}</span>{% endif %}
{% if task.attachment %}<span>ğŸ“ <a href="{{ task.attachment.url }}" target="_blank">Ğ’Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ</a></span>{% endif %}
</div>
{% if task.work_request.exists %}
<div class="task-related-request">
<small>ğŸ”— Ğ¡Ğ²ÑĞ·Ğ°Ğ½Ğ¾ Ñ Ğ·Ğ°ÑĞ²ĞºĞ¾Ğ¹: {{ task.work_request.first.get_request_type_display }} Ğ¾Ñ‚ {{ task.work_request.first.employee.get_full_name }}</small>
</div>
{% endif %}
<a href="{% url 'hr:task_update' task.id %}" class="btn btn-secondary btn-sm">ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ</a>
</div>
{% empty %}
<p>ĞĞµÑ‚ Ğ·Ğ°Ğ´Ğ°Ñ‡</p>
{% endfor %}
</div>
</div>
{% endblock %}